<h3 class="card-header text-center">Save</h3>
    <section>
        <div class="row">
          <div class="col-sm-4">
            <% form.submit 'Save', class: 'card-link btn btn-lg btn-block btn-light mb-2' %>
          </div>
          <div class="col-sm-8">
            <% unless @request.submitted %>
                <% link_to 'Send emails out to participants', email_request_for_tender_path(@request), class: 'card-link btn btn-lg btn-block btn-success',
                            data: {'submit-form': true,
                                   confirm: "If you haven't clicked the 'save' button, please cancel this message and click 'save' before clicking send emails out"} %>
            
          </div>
        </div>
    </section>


boq = Boq.create!(name: request_for_tender.project_name,
                  request_for_tender: request_for_tender)

tag_one = Tag.new(name: "Tag one")
tag_one.boq = boq
tag_one.save!

tag_two = Tag.new(name: "Tag two")
tag_two.boq = boq
tag_two.save!

page_one = Page.create!(name: 'Page One', boq: boq)
page_two = Page.create!(name: 'Page Two', boq: boq)

item_one = Item.new(name: 'A', description: 'First Item', quantity: '42',
                        unit: 'm2', boq: boq, page: page_one)
item_two = Item.new(name: 'B', description: 'Second Item', quantity: '43',
                        unit: 'l',  boq: boq, page: page_one)
item_three = Item.new(name: 'C', description: 'Third Item', quantity: '44',
                          unit: 'nr', boq: boq, page: page_one)
item_four = Item.new(name: 'D', description: 'Fourth Item', quantity: '45',
                         unit: 'm2',  boq: boq, page: page_two)
item_five = Item.new(name: 'E', description: 'Fifth Item', quantity: '46',
                         unit: 'nr',  boq: boq, page: page_two)
item_one.tag = tag_one
item_one.save!
item_two.tag = tag_two
item_two.save!
item_three.tag = tag_one
item_three.save!
item_four.tag = tag_two
item_four.save!
item_five.tag = tag_one
item_five.save!

participant = Participant.create!(email: 'bkwaku@rocketmail.com',
                                  phone_number: '0509825831',
                                  first_name: 'Kwaku',
                                  last_name: 'Boateng',
                                  comment: 'My comments here',
                                  interested: true,
                                  interested_declaration_time: Time.current + 8.days,
                                  bid_submission_time: Time.current + 10.days,
                                  request_for_tender: request_for_tender)

filled_item_one = FilledItem.new(amount: '2', rate: '75')
filled_item_one.participant = participant
filled_item_one.item = item_one
filled_item_one.save!

filled_item_two = FilledItem.new(amount: '2', rate: '65')
filled_item_two.participant = participant
filled_item_two.item = item_two
filled_item_two.save!

filled_item_three = FilledItem.new(amount: '2', rate: '65')
filled_item_three.participant = participant
filled_item_three.item = item_three
filled_item_three.save!

filled_item_four = FilledItem.new(amount: '2', rate: '55')
filled_item_four.participant = participant
filled_item_four.item = item_four
filled_item_four.save!

filled_item_five = FilledItem.new(amount: '2', rate: '45')
filled_item_five.participant = participant
filled_item_five.item = item_five
filled_item_five.save!

#####################################################

participant_two = Participant.create!(email: 'kbboateng14@gmail.com',
                                      phone_number: '0509825851',
                                      first_name: 'Kwaku',
                                      last_name: 'Boakye',
                                      comment: 'My comments here',
                                      interested: true,
                                      interested_declaration_time: Time.current + 9.days,
                                      bid_submission_time: Time.current + 11.days,
                                      request_for_tender: request_for_tender)

filled_item_second_one = FilledItem.new(amount: '3', rate: '75')
filled_item_second_one.participant = participant_two
filled_item_second_one.item = item_one
filled_item_second_one.save!

filled_item_second_two = FilledItem.new(amount: '3', rate: '65')
filled_item_second_two.participant = participant_two
filled_item_second_two.item = item_two
filled_item_second_two.save!

filled_item_second_three = FilledItem.new(amount: '3', rate: '65')
filled_item_second_three.participant = participant_two
filled_item_second_three.item = item_three
filled_item_second_three.save!

filled_item_second_four = FilledItem.new(amount: '3', rate: '55')
filled_item_second_four.participant = participant_two
filled_item_second_four.item = item_four
filled_item_second_four.save!

filled_item_second_five = FilledItem.new(amount: '3', rate: '45')
filled_item_second_five.participant = participant_two
filled_item_second_five.item = item_five
filled_item_second_five.save!



















                        onStepChanging: function (event, currentIndex, newIndex){
          //if we are have processed boq
          if(currentIndex === 1 && localStorage.getItem('buildpalsIncTab') == 1){
            localStorage.removeItem('buildpalsIncTab');
            currentIndex = 2;
            return true;
          }
          //if we are moving from boq screen to next screen and boq has not been processed
          if(currentIndex === 1){
            $("#request-form").submit();
            localStorage.setItem('buildpalsIncTab', 1);
          }
          else{
            return true;
          }
        }











                    $.ajax({
                  url: "/request_for_tenders/"+id,
                  type: "PATCH",
                  data: { 
                  request_for_tender: {
                              id: id,
                        project_name: $("#request_project_name").val(),
                              city: $("#request_city").val(),
                          description: $('#request_description').val(),
                            country_id: $("#request_country").val()
                            }
                        
                  },
                    success: function(resp){
                      //event.preventDefault(); 
                      //return true;
                      console.log(resp);
                    },
                    error:function(resp){
                      addToLocalStorage();
                    }
                });
            return true;