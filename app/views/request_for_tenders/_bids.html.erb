<div class="graph mb-4">
  <canvas id="barChart" class="mb-2"></canvas>
</div>


<div class="d-flex w-100 justify-content-between mb-2 form-inline">
  <h5>Shortlisted Bids</h5>
</div>

<table class="table table-striped table-hover mb-5">
  <thead class="thead-light">
  <tr>
    <th>Company</th>
    <th>Bid</th>
    <th>Difference</th>
    <th>Bid time</th>
    <th>Rating</th>
    <th></th>
  </tr>
  </thead>
  <tbody>
  <% @request.participants.bid_list.where('rating >= 0').order(rating: :desc).each do |participant| %>
      <tr>
        <td>
          <span data-toggle="tooltip" data-placement="top" title="<%= participant.email %>">
              <%= participant.name %>
          </span>
        </td>
        <td>
          $<%= participant.bid %>
        </td>
        <td>
          $<%= participant.bid_difference %>
          <small>(<%= participant.bid_difference_as_percentage %>)</small>
        </td>
        <td><small><%= participant.bid_submission_time.to_formatted_s(:short) %></small></td>
        <td>
          <% participant.rating.times do %>
            <span class="fa fa-star text-warning"></span>
          <% end %>
        </td>
        <td>
          <%= link_to 'View bid', participant_boq_path(participant)%>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>


<div class="d-flex w-100 justify-content-between mb-2 form-inline">
  <h5>Disqualified Bids</h5>
</div>

<table class="table table-striped table-hover">
  <thead class="thead-light">
  <tr>
    <th>Company</th>
    <th>Bid</th>
    <th>Difference</th>
    <th>Bid time</th>
    <th>Rating</th>
    <th></th>
  </tr>
  </thead>
  <tbody>
  <% @request.participants.bid_list.where('rating < 0').order(rating: :desc).each do |participant| %>
      <tr>
        <td>
          <span data-toggle="tooltip" data-placement="top" title="<%= participant.email %>">
              <%= participant.name %>
          </span>
        </td>
        <td>
          $<%= participant.bid %>
        </td>
        <td>
          $<%= participant.bid_difference %>
          <small>(<%= participant.bid_difference_as_percentage %>)</small>
        </td>
        <td><small><%= participant.bid_submission_time.to_formatted_s(:short) %></small></td>
        <td>
          <span class="text-danger">Disqualified</span>
        </td>
        <td>
          <%= link_to 'View bid', participant_boq_path(participant) %>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>