<%= form_with(model: request, local: true, id: 'request-form') do |form| %>
    <% if request.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(request.errors.count, "error") %> prohibited this request from being saved:</h2>

          <ul>
            <% request.errors.full_messages.each do |message| %>
                <li><%= message %></li>
            <% end %>
          </ul>
        </div>
    <% end %>

    <div class="card">
      <h4 class="card-header text-center">
        <%= title %>
      </h4>

      <%= render 'general_information_form', form: form %>
      <%= render 'documents_form', form: form %>
      <%= render 'bill_of_quantities_form', form: form %>
      <% render 'questionnaire_form', form: form %>
      <%= render 'participants_form', form: form %>
      <div class="card-body">
        <div class="row">
          <div class="col-sm-4">
            <%= form.submit 'Save', class: 'card-link btn btn-lg btn-block btn-light mb-2' %>
          </div>
          <div class="col-sm-8">
            <% unless @request.submitted %>
                <%= link_to 'Send emails out to participants', email_request_for_tender_path(@request), class: 'card-link btn btn-lg btn-block btn-success',
                            data: {'submit-form': true,
                                   confirm: "If you haven't clicked the 'save' button, please cancel this message and click 'save' before clicking send emails out"} %>
            <% end %>
          </div>
        </div>
      </div>
    </div>

<% end %>