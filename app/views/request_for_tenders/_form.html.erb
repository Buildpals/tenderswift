<%= form_with(model: request, local: true, id: 'request-form') do |form| %>

    <div class="card">
      <h4 class="card-header text-center">
        <%= title %>
      </h4>

      <% if request.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(request.errors.count, "error") %> prohibited this request from being saved:</h2>

            <ul>
              <% request.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
              <% end %>
            </ul>
          </div>
      <% end %>

      <%= render 'general_information_form', form: form %>
      <%= render 'documents_form', form: form %>
      <%= render 'bill_of_quantities_form', form: form %>
      <% render 'questionnaire_form', form: form %>
      <%= render 'participants_form', form: form %>
      <div class="card-body">
        <div class="row">
          <div class="col-sm-4">
            <%= form.submit 'Save', class: 'card-link btn btn-lg btn-block btn-light mb-2' %>
          </div>
          <div class="col-sm-8">
            <% unless @request.submitted %>
                <%= link_to 'Send Request Out', email_request_for_tender_path(@request), class: 'card-link btn btn-lg btn-block btn-success',
                            data: {'submit-form': true} %>
            <% end %>
          </div>
        </div>
      </div>
    </div>

<% end %>


<div id="spinner" style="display: none">
  <i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>
  <span class="sr-only">Saving...</span>
</div>