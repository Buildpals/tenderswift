<%= form_with model: @request_for_tender,
              scope: :request_for_tender,
              url: wizard_path,
              method: :put,
              id: 'request-form' do |form| %>

  <div class="min-height-500">

    <%= render 'request_for_tender_errors' %>

    <p class="text-muted small ">
      Please enter the following details about the project.
    </p>

    <div class="form-row">
      <div class="col-md-12">
        <div class="form-group">
          <%= form.label :project_name, 'Name' %>
          <%= form.text_field :project_name,
                              id: :request_for_tender_project_name,
                              class: 'form-control form-control-sm' %>
          <small class="form-text text-muted">
            Example: Purchases of office supplies; Construction of sawmill;
            Railroad engineering works;
          </small>
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="col-md-8" id="request_for_tender_deadline">
        <div class="form-group">
          <%= form.label :deadline, 'Tender deadline' %> <br>
          <%= form.datetime_select :deadline,
                                   {
                                       ampm: true,
                                       order: [:day, :month, :year],
                                       start_year: Date.today.year
                                   },
                                   {} %>
          <strong>GMT</strong>
          <small class="form-text text-muted">
            Deadline by which all contractors must submit their tender for this
            project
          </small>
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="col-md-4">
        <div class="form-group">
          <%= form.label :country %>
          <%= form.country_select :country_code,
                                  {
                                      priority_countries:
                                          %w(IN TH ID PK BD PH EG NG MX)
                                  },
                                  {
                                      id: :request_for_tender_country,
                                      class: 'form-control form-control-sm'
                                  } %>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <%= form.label :city, 'City/Town' %>
          <%= form.text_field :city,
                              id: :request_for_tender_city,
                              class: 'form-control form-control-sm' %>
        </div>
      </div>
    </div>

    <div class="form-row mt-5">
      <div class="col-md-12">
        <div class="form-group">
          <%= form.label :description,
                         'Description',
                         class: '' %>

          <small class="form-text text-muted mb-3">
            Please enter the description for this tender and details of
            how bidders should tender for this project
          </small>
          <%= form.trix_editor :description,
                               {
                                   id: :request_for_tender_description,
                                   rows: 3,
                                   class: 'form-control form-control-sm'
                               } %>
        </div>
      </div>
    </div>

  </div>

  <hr>
  <div class="d-flex justify-content-between align-items-center float-right">

    <%= form.submit 'Save and continue', class: 'btn btn-accent' %>
  </div>
<% end %>


<% if Rails.env.production? && current_publisher.sign_in_count <= 1 %>
  <div class="modal fade" id="surveyModal" tabindex="-1" role="dialog"
       aria-labelledby="surveyModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="surveyModalLabel">Claim your free
            request for tenders</h5>
        </div>
        <div class="modal-body">
          <p>In order to help you claim your 10 free request for tenders, we
            need to know more about your tendering process.</p>
          <p>Help us with that, by answering the following question:</p>

          <span>
            <p class="survey-question">When do you expect to send out a request for tender?</p>
          </span>

          <p>
            <%= link_to '1. In two weeks time', "https://survey.survicate.com/d9a9c30447a387d6/?p=sendgrid&#{current_publisher.email}=&aid=501992",
                        { class: 'btn btn-outline-info vote', target: '_blank' } %>
          </p>

          <p>
            <%= link_to '2. In the next one month', "https://survey.survicate.com/d9a9c30447a387d6/?p=sendgrid&#{current_publisher.email}=&aid=501993",
                        { class: 'btn btn-outline-info vote', target: '_blank'} %>
          </p>

          <p>
            <%= link_to '3. In the next three months.', "https://survey.survicate.com/d9a9c30447a387d6/?p=sendgrid&#{current_publisher.email}=&aid=501994",
                        { class: 'btn btn-outline-info vote', target:
                            '_blank'} %>
          </p>

          <p>
            <%= link_to '4.  I want to bid on a request for tender instead.', "https://survey.survicate.com/d9a9c30447a387d6/?p=sendgrid&#{current_publisher.email}=&aid=501995",
                        { class: 'btn btn-outline-info vote', target:
                            '_blank'} %>
          </p>

          <p>
            <%= link_to "5. I don't want to send out a request for tender or bid
                        on one.",
                        "https://survey.survicate.com/d9a9c30447a387d6/?p=sendgrid&#{current_publisher.email}=&aid=506144",
                        { class: 'btn btn-outline-info vote', target:
                            '_blank'} %>
          </p>

        </div>
        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>
<% end %>