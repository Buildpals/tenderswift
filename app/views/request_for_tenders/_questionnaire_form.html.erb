<%= form_with(model: request, local: true, id: 'request-form') do |form| %>

    <% if request.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(request.errors.count, "error") %> prohibited this request from being saved:</h2>

          <ul>
            <% request.errors.full_messages.each do |message| %>
                <li><%= message %></li>
            <% end %>
          </ul>
        </div>
    <% end %>

    <div class="text-center">
      <%= form.label :other_requirements %>
    </div>
    <p class="text-muted text-center small">
      Add the any additional requirements you have for the contractors who are going to bid on this project.
      <br>
      These requirements are in the form of questions they will have to answer.
      Their answers will be made automatically comparable by buildpals.
      The form below will help you create those questions.
    </p>

    <div class="nested-forms mb-5">
      <%= form.fields_for :questions do |question| %>
          <%= render 'question_fields', f: question %>
      <% end %>
      <li class="d-flex w-100 justify-content-between">
        <%= link_to_add_association 'Add more questions', form, :questions, class: 'btn btn-sm btn-primary my-1' %>
      </li>
    </div>


    <div class="w-100 d-flex justify-content-between">
      <%= form.submit 'Previous', class: 'btn btn-primary mr-2 ml-auto' %>
      <%= form.submit 'Save', class: 'btn btn-primary' %>
      <% unless @request.submitted %>
          <%= form.submit 'Send Request Out', class: 'btn btn-success ml-2' %>
      <% end %>
    </div>
<% end %>

