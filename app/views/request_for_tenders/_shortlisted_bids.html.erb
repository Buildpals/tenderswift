<div class="d-flex w-100 justify-content-between mb-2 form-inline">
  <h5>Shortlisted Bids</h5>
</div>

<table class="table table-striped table-hover mb-5">
  <thead class="thead-light">
  <tr>
    <th>Company</th>
    <th>Bid</th>
    <th>Difference</th>
    <th>Rating</th>
    <th colspan="2"></th>
  </tr>
  </thead>
  <tbody>
  <% @request.participants.not_disqualified.order(rating: :desc).each do |participant| %>
    <tr>
      <td>
            <span data-toggle="tooltip" data-placement="top" title="<%= participant.email %>">
                <%= participant.name %>
            </span>
      </td>
      <td>
        <%= @request.currency_symbol %>
        <%= participant.bid %>
      </td>
      <td>
        <%= @request.currency_symbol %>
        <small>(<%= participant.bid_difference_as_percentage %>)</small>
      </td>
      <td>
        <%= render 'layouts/rating_bar', participant: participant %>
      </td>
      <td>
        <%= link_to 'View bid', bid_boq_path(participant) %>
      </td>
      <td>
        <div class="dropdown">
          <button class="btn btn-sm btn-light dropdown-toggle" type="button" id="actions_<% participant.id %>" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Actions
          </button>
          <div class="dropdown-menu" aria-labelledby="actions_<% participant.id %>">
            <% if participant.disqualified %>
              <%= button_to "Add to Shortlist",
                            { action: 'undo_disqualify', controller: 'participants', id: participant.auth_token },
                            { class: 'dropdown-item remove-con-btn' } %>
            <% else %>
              <%= button_to "Disqualify",
                            { action: 'disqualify', controller: 'participants', id: participant.auth_token },
                            { class: 'dropdown-item remove-con-btn' } %>
            <% end %>
          </div>
        </div>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>